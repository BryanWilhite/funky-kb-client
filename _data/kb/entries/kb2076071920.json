{
  "Document": {
    "DocumentId": 2076071920,
    "Title": "SQL Server 2005 t-SQL: Flippant Remarks about Using XPath Assertions Instead of XML Schema",
    "DocumentShortName": null,
    "FileName": null,
    "Path": null,
    "CreateDate": "2007-12-11T12:57:09",
    "ModificationDate": "2007-12-11T12:57:09",
    "TemplateId": null,
    "SegmentId": 72,
    "IsRoot": false,
    "IsActive": true,
    "SortOrdinal": null,
    "ClientId": null,
    "Tag": null
  },
  "Content": "For some crazy reason you may want to avoid making a CREATE XML SCHEMA COLLECTION statement but still validate your XML. Here is an example to do this with XPath assertions in XQuery:\n\n\n    IF (@xmlInput.exist('//HostName') = 0)\n    OR (@xmlInput.value('string-length((//HostName/text())[1])','int') = 0)\n    BEGIN\n        SET @xmlOutput = '\n        <Header>Failed to Receive Device Data</Header>\n        <Code>999</Code>\n        <Line>XML element “HostName” was not found or is empty.</Line>\n        '\n        GOTO RETURN_XML_MESSAGE\n    END\n\nThis technique can be used in the discussion by Denis Ruckebusch filed under “Complementing XSD with CHECK constraints” here:\n\n    http://blogs.msdn.com/denisruc/archive/2006/08/22/713342.aspx\n ",
  "Tag": "kb2076071920"
}