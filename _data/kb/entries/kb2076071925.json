{
  "Document": {
    "DocumentId": 2076071925,
    "Title": "SQL Server 2005 t-SQL: The Use of the nodes() Method for XML Types",
    "DocumentShortName": null,
    "FileName": null,
    "Path": null,
    "CreateDate": "2007-12-22T22:06:50",
    "ModificationDate": "2007-12-22T22:06:50",
    "TemplateId": null,
    "SegmentId": 72,
    "IsRoot": false,
    "IsActive": true,
    "SortOrdinal": null,
    "ClientId": null,
    "Tag": null
  },
  "Content": "DECLARE @xml xml\n\nSET @xml = '\n    <Root>\n        <Item1 />\n        <Item2 />\n        <Item3 />\n        <Item4 />\n        <Item5 />\n    </Root>\n'\n\nSELECT\n    Temp.Items.query('.') AS [Items]\nFROM\n    @xml.nodes('//Root/*') AS Temp(Items)\n\n/*\n    The SELECT form avoids an error like:\n\n    “The column 'Items' that was returned\n    from the nodes() method cannot be used directly.\n    It can only be used with one\n    of the four xml data type methods,\n    exist(), nodes(), query(), and value(),\n    or in IS NULL and IS NOT NULL checks.”\n\n    The table alias (with columns) avoids this error:\n\n    “The table (and its columns) returned\n    by a table-valued method need to be aliased.”\n\n    These two errors imply that:\n\n         * The nodes() method returns a table.\n         * The table returned from the nodes() has XML columns.\n\n    It follows that one may never persist a table with XML columns\n    but temporary XML columns are very likely to be used.\n\n    For general information, see\n    “Introduction to XQuery in SQL Server 2005”\n    http://technet.microsoft.com/en-us/library/ms345122.aspx\n*/\n",
  "Tag": "kb2076071925"
}