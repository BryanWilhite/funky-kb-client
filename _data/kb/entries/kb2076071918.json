{
  "Document": {
    "DocumentId": 2076071918,
    "Title": "C# Code: Gathering Credentials from the Console; NetworkCredential; ConsoleKeyInfo",
    "DocumentShortName": null,
    "FileName": null,
    "Path": null,
    "CreateDate": "2007-12-06T14:39:30",
    "ModificationDate": "2007-12-06T14:39:30",
    "TemplateId": null,
    "SegmentId": 83,
    "IsRoot": false,
    "IsActive": true,
    "SortOrdinal": null,
    "ClientId": null,
    "Tag": null
  },
  "Content": "Console.WriteLine( \"Enter username:\" );\nstring userName = Console.ReadLine();\n\nConsole.WriteLine( \"\\nEnter password:\" );\nStringBuilder password = new StringBuilder();\n\nConsoleKeyInfo info = Console.ReadKey( true );\nwhile ( info.Key != ConsoleKey.Enter )\n{\n    if ( info.Key != ConsoleKey.Backspace )\n    {\n        password.Append( info.KeyChar );\n        info = Console.ReadKey( true );\n    }\n    else if ( info.Key == ConsoleKey.Backspace )\n    {\n        if ( password.Length > 0 )\n            password.Remove( password.Length - 1, 1 );\n        info = Console.ReadKey( true );\n    }\n}\nfor ( int i = 0; i < password.Length; i++ ) Console.Write( \"*\" ); Console.WriteLine();\n\nstring domain = String.Empty;\nstring[] stringArray = userName.Split( new char[] { '\\\\' } );\nif ( stringArray.Length > 1 )\n{\n    domain = stringArray[0];\n    userName = stringArray[1];\n}\nelse\n{\n    domain = Environment.MachineName;\n}\n\nNetworkCredential cred =\n    new NetworkCredential( userName, password.ToString(), domain );\n\n/*\n    For more information see:\n\n    “How to: Authenticate with a User Name and Password”\n    http://msdn2.microsoft.com/en-us/library/ms733131.aspx\n\n    “ConsoleKeyInfo Structure”\n    http://msdn2.microsoft.com/en-us/library/system.consolekeyinfo.aspx\n*/",
  "Tag": "kb2076071918"
}