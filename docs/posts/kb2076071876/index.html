<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DreamHost: Maintaining an Offline Copy of WordPress - the funky knowledge base</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>


<p>This note refers to WordPress 2.2.2 from a DreamHost bash shell to an Ubuntu VM.</p>
<p>Script mysqldump on the DreamHost server to export WordPress data. This is an example:</p>
<pre><code>mysqldump --opt -u myuser -p -h mydbdomain.com my_wp_db &amp;bsol;&amp;bsol;
    --ignore-table=my_wp_db.wp_sk2_logs &amp;bsol;&amp;bsol;
    --ignore-table=my_wp_db.wp_sk2_spams &amp;bsol;&amp;bsol;
    --default-character-set=&amp;quot;latin1&amp;quot; &amp;gt;mydb_bak.sql
</code></pre>
<p>Script rsync to copy/overwrite the SQL backup (mydb_bak.sql).</p>
<p>Script rsync to overwrite the local WordPress installation. This is an example:</p>
<pre><code>rsync -e ssh -ar --delete-after &amp;bsol;&amp;bsol;
    --exclude '*wp-content/themes*' &amp;bsol;&amp;bsol;
    --progress &amp;bsol;&amp;bsol;
    --stats &amp;bsol;&amp;bsol;
    me@mydomain.com:myremotesite/wordpressfolder/ mylocalsite/wordpressfolder/
</code></pre>
<p>Note that the freaking, huge themes folder is excluded.</p>
<p>Use phpMyAdmin or mysql to load the SQL backup. Eventually the file size of the backup will get so large that you might have to use mysql exclusively to avoid screwing around with PHP settings.</p>
<p>Use phpMyAdmin (or mysql) to update the following WordPress options for your local (offline) web server:</p>
<pre><code>option_name='siteurl'
option_name='home'
</code></pre>
<p>These changes to the database should be enough to get the off-line site displaying properly. However, the enhanced security on DreamHost.com may prevent your local web server from loading wp-config.php. You might have to make sure that others can read this file on your local machine.</p>
<p>Edit wp-config.php with lines like the following:</p>
<pre><code>define('DB_NAME', 'your_local_wp_db');
define('DB_HOST', 'localhost');
</code></pre>
<p>You might need to change DB_USER and DB_PASSWORD as well.</p>


<footer>
    &copy; 2019 the funky knowledge base
</footer>
</body>
</html>